% ============================================================================
% The Calculus of Computational Paths â€” Complete Paper
% ============================================================================
% Compile with: pdflatex main && bibtex main && pdflatex main && pdflatex main
% ============================================================================
\documentclass[11pt,a4paper]{report}

% --- Encoding & Fonts ---
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{microtype}

% --- Mathematics ---
\usepackage{amsmath,amssymb,amsthm,mathtools}
\usepackage{stmaryrd}        % \llbracket, \rrbracket
\usepackage{bm}

% --- Tables ---
\usepackage{booktabs}
\usepackage{longtable}

% --- Cross-references & Hyperlinks ---
\usepackage[colorlinks=true,
            linkcolor=blue!60!black,
            citecolor=green!50!black,
            urlcolor=blue!70!black]{hyperref}
\usepackage[capitalize,noabbrev]{cleveref}

% --- Layout ---
\usepackage[margin=1in]{geometry}
\usepackage{enumitem}

% --- Diagrams ---
\usepackage{tikz-cd}

% ============================================================================
% Theorem-like environments
% ============================================================================
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{notation_def}[theorem]{Notation}

\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}

% ============================================================================
% Custom operators and notation
% ============================================================================
\DeclareMathOperator{\refl}{refl}
\DeclareMathOperator{\symop}{symm}
\DeclareMathOperator{\ofEq}{ofEq}
\DeclareMathOperator{\toEq}{toEq}
\DeclareMathOperator{\tr}{transport}
\DeclareMathOperator{\apd}{apd}
\DeclareMathOperator{\id}{id}

\DeclareMathOperator{\congrArgOp}{congrArg}
\DeclareMathOperator{\mapLeft}{mapLeft}
\DeclareMathOperator{\mapRight}{mapRight}
\DeclareMathOperator{\mapTwo}{map_2}
\DeclareMathOperator{\prodMk}{prodMk}
\DeclareMathOperator{\fst}{fst}
\DeclareMathOperator{\snd}{snd}
\DeclareMathOperator{\inlOp}{inl}
\DeclareMathOperator{\inrOp}{inr}
\DeclareMathOperator{\sigmaMk}{sigmaMk}
\DeclareMathOperator{\sigmaFst}{sigmaFst}
\DeclareMathOperator{\sigmaSnd}{sigmaSnd}
\DeclareMathOperator{\lamCongr}{lamCongr}
\DeclareMathOperator{\app}{app}

\DeclareMathOperator{\substL}{substL}
\DeclareMathOperator{\substR}{substR}
\DeclareMathOperator{\normalize}{normalize}

\DeclareMathOperator{\Fib}{Fib}
\DeclareMathOperator{\cofib}{cofib}
\DeclareMathOperator{\hofiber}{hofiber}
\DeclareMathOperator{\conn}{conn}
\DeclareMathOperator{\trunc}{trunc}
\DeclareMathOperator{\merid}{merid}
\DeclareMathOperator{\wind}{wind}
\DeclareMathOperator{\encode}{encode}
\DeclareMathOperator{\decode}{decode}
\DeclareMathOperator{\glue}{glue}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\incl}{incl}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Aut}{Aut}

% Aliases used in Part II (homotopy theory chapters)
\newcommand{\congrArg}{\congrArgOp}
\newcommand{\transport}{\tr}
\newcommand{\symm}{\symop}
\newcommand{\inl}{\inlOp}
\newcommand{\inr}{\inrOp}

% Short-hand
\newcommand{\Path}{\operatorname{Path}}
\newcommand{\Step}{\operatorname{Step}}
\newcommand{\Rw}{\operatorname{Rw}}
\newcommand{\RwEq}{\operatorname{RwEq}}
\newcommand{\PathQuot}{\operatorname{PathQuot}}
\newcommand{\LoopQuot}{\operatorname{LoopQuot}}
\newcommand{\StrictGroupoid}{\operatorname{StrictGroupoid}}
\newcommand{\Context}{\operatorname{Context}}
\newcommand{\BiContext}{\operatorname{BiContext}}
\newcommand{\DepContext}{\operatorname{DepContext}}
\newcommand{\Derivation}{\operatorname{D}}
\newcommand{\Deriv}{\operatorname{D}}
\newcommand{\MetaStep}{\operatorname{MetaStep}}
\newcommand{\PathRwQuot}{\operatorname{PathRwQuot}}

% Loop/homotopy
\newcommand{\lp}{\ell}

% Rewrite arrows
\newcommand{\rew}{\mathbin{\triangleright}}         % single step
\newcommand{\rews}{\mathbin{\triangleright^{*}}}    % multi-step
\newcommand{\rweq}{\mathbin{\approx}}               % rewrite equality

% Misc
\newcommand{\comp}{\mathbin{\cdot}}
\newcommand{\inv}[1]{{#1}^{-1}}
\newcommand{\ofEqfn}[1]{\ofEq(#1)}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\Sort}{\mathsf{Sort}}
\newcommand{\Type}{\mathsf{Type}}
\newcommand{\Prop}{\mathsf{Prop}}
\newcommand{\List}{\operatorname{List}}
\newcommand{\Eq}{\operatorname{Eq}}
\newcommand{\IdA}{\operatorname{Id}}
\newcommand{\ab}{\mathrm{ab}}
\newcommand{\trans}{\operatorname{trans}}

% ============================================================================
\title{\textbf{The Calculus of Computational Paths}\\[6pt]
  \large A Lean~4 Formalization of Rewrite-Trace Equality,\\
  Weak $\omega$-Groupoids, and Homotopy Theory}

\author{
  Arthur Freitas Ramos\thanks{Centro de Inform\'atica, Universidade Federal
    de Pernambuco, Recife, Brazil. \texttt{arfreita@microsoft.com}}
  \and
  Ruy J.\,G.\,B.\ de Queiroz\footnotemark[1]
  \and
  Anjolina G.\ de Oliveira\footnotemark[1]
}
\date{\today}

% ============================================================================
\begin{document}
\maketitle

% --- Abstract ---
\begin{abstract}
We present a comprehensive mathematical theory of \emph{computational
paths}---a formalism in which propositional equalities between elements of a
type carry explicit rewrite traces recording the sequence of elementary steps
by which they were derived. A computational path from $a$ to~$b$ in a type~$A$
is a pair $(s, \pi)$ where $\pi : a =_A b$ is a propositional equality and
$s$ is a finite list of elementary rewrite steps. The space of computational
paths is equipped with a confluent, terminating rewrite system whose 75~rules
are organized into eight groups covering path algebra, type-former
$\beta/\eta$-rules, transport, contexts, dependent contexts, bi-contexts, map
congruence, and structural closure. We prove that this structure gives rise to
weak $\omega$-groupoids in the sense of Batanin--Leinster, with contractibility
beginning at dimension~3---the critical threshold that preserves non-trivial
fundamental groups. Building on these foundations, we develop the associated
homotopy theory: fundamental groups and their functoriality, the Eckmann--Hilton
argument, the Seifert--van Kampen theorem, fibrations, covering spaces, the long
exact sequence of homotopy groups, the Hurewicz theorem, spectral sequences, and
computations of fundamental groups for standard spaces including the circle
($\pi_1(S^1) \cong \mathbb{Z}$), torus ($\mathbb{Z} \times \mathbb{Z}$),
figure-eight ($\mathbb{Z} * \mathbb{Z}$), Klein bottle, projective spaces, and
lens spaces. The entire development is formalized in Lean~4 (516~files,
113,024~lines, 3,258~definitions, 1,466~theorems, 2,711~structures).
\end{abstract}

% --- Table of Contents ---
\tableofcontents

% ============================================================================
%  PART I: FOUNDATIONS (Chapters 1--5)
% ============================================================================
\part{Foundations}
\label{part:foundations}

\input{chapters/ch1_introduction}
\input{chapters/ch2_basic_constructions}
\input{chapters/ch3_rewrite_system}
\input{chapters/ch4_groupoid}
\input{chapters/ch5_higher_dimensional}

% ============================================================================
%  PART II: HOMOTOPY THEORY (Chapters 6--10)
% ============================================================================
\part{Homotopy Theory}
\label{part:homotopy}

\input{chapters/part2}

% ============================================================================
%  PART III: METALOGICAL PROPERTIES AND CONCLUSIONS (Chapters 11--12)
% ============================================================================
\part{Metalogical Properties and Conclusions}
\label{part:metatheory}

\input{chapters/ch11_metatheory}
\input{chapters/ch12_conclusion}

% ============================================================================
%  APPENDICES
% ============================================================================
\appendix

\input{chapters/appendix_a_rules}
\input{chapters/appendix_b_index}
\input{chapters/appendix_c_dependency}

% ============================================================================
%  BIBLIOGRAPHY
% ============================================================================
\bibliographystyle{alpha}
\bibliography{references}

\end{document}
