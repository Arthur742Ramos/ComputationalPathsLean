% ============================================================================
% Appendix A: Complete List of Rewrite Rules
% ============================================================================
\chapter{Complete List of Rewrite Rules}
\label{app:rules}

We list all 76 rewrite rules of the $\mathrm{LND}_{\mathrm{EQ}}$-TRS,
organized by group. Each rule is given with its formal name (matching the
constructor of the \texttt{Step} inductive type in the Lean~4
formalization), its $\mathrm{LND}_{\mathrm{EQ}}$ mnemonic, and a
mathematical description. The notation follows Chapter~\ref{ch:rewrite-system}:
$p \rew q$ denotes a single rewrite step from~$p$ to~$q$.

\section*{Group I: Path Algebra (8 rules)}

\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em]
  \item \texttt{symm\_refl} \hfill \textbf{(sr)} \\
    $\inv{\refl(a)} \;\rew\; \refl(a)$.

  \item \texttt{symm\_symm} \hfill \textbf{(ss)} \\
    $\inv{(\inv{p})} \;\rew\; p$.

  \item \texttt{trans\_refl\_left} \hfill \textbf{(lrr)} \\
    $\refl(a) \comp p \;\rew\; p$.

  \item \texttt{trans\_refl\_right} \hfill \textbf{(rrr)} \\
    $p \comp \refl(b) \;\rew\; p$.

  \item \texttt{trans\_symm} \hfill \textbf{(tr)} \\
    $p \comp \inv{p} \;\rew\; \refl(a)$.

  \item \texttt{symm\_trans} \hfill \textbf{(tsr)} \\
    $\inv{p} \comp p \;\rew\; \refl(b)$.

  \item \texttt{symm\_trans\_congr} \hfill \textbf{(stss)} \\
    $\inv{(p \comp q)} \;\rew\; \inv{q} \comp \inv{p}$.

  \item \texttt{trans\_assoc} \hfill \textbf{(tt)} \\
    $(p \comp q) \comp r \;\rew\; p \comp (q \comp r)$.
\end{enumerate}

\section*{Group II: Type-Former $\beta$/$\eta$-Rules (17 rules)}

\paragraph{Map decomposition.}
\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, start=9]
  \item \texttt{map2\_subst} \hfill \textbf{(mx2l1)} \\
    $\mapTwo(f, p, q) \;\rew\; \mapRight(f, a_1, q) \comp \mapLeft(f, p, b_2)$.
\end{enumerate}

\paragraph{Product rules.}
\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, resume]
  \item \texttt{prod\_fst\_beta} \hfill \textbf{(mx2l2)} \\
    $\fst(\prodMk(p, q)) \;\rew\; p$.

  \item \texttt{prod\_snd\_beta} \hfill \textbf{(mx2r1)} \\
    $\snd(\prodMk(p, q)) \;\rew\; q$.

  \item \texttt{prod\_rec\_beta} \hfill \textbf{(mx2r2)} \\
    $\mathrm{rec}(f) \circ \prodMk(p, q) \;\rew\; \mapTwo(f, p, q)$.

  \item \texttt{prod\_eta} \hfill \textbf{(mxetaProd)} \\
    $\prodMk(\fst(r), \snd(r)) \;\rew\; r$.

  \item \texttt{prod\_mk\_symm} \hfill \textbf{(mx3l)} \\
    $\inv{\prodMk(p, q)} \;\rew\; \prodMk(\inv{p}, \inv{q})$.

  \item \texttt{prod\_map\_congrArg} \hfill \textbf{(mxc)} \\
    $\congrArgOp(f, \prodMk(p, q)) \;\rew\; \prodMk(\congrArgOp(\fst \circ f, p),
    \congrArgOp(\snd \circ f, q))$.
\end{enumerate}

\paragraph{Sigma type rules.}
\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, resume]
  \item \texttt{sigma\_fst\_beta} \hfill \textbf{(mxsigmaFst)} \\
    $\sigmaFst(\sigmaMk(p, q)) \;\rew\; \ofEq(\toEq(p))$.

  \item \texttt{sigma\_snd\_beta} \hfill \textbf{(mxsigmaSnd)} \\
    $\sigmaSnd(\sigmaMk(p, q)) \;\rew\; \ofEq(\toEq(q))$.

  \item \texttt{sigma\_eta} \hfill \textbf{(mxetaSigma)} \\
    $\sigmaMk(\sigmaFst(r), \sigmaSnd(r)) \;\rew\; r$.

  \item \texttt{sigma\_mk\_symm} \hfill \textbf{(smsigma)} \\
    $\inv{\sigmaMk(p, q)} \;\rew\; \sigmaMk(\inv{p}, \inv{q'})$
    where $q'$ incorporates the transport correction.
\end{enumerate}

\paragraph{Sum type rules.}
\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, resume]
  \item \texttt{sum\_rec\_inl\_beta} \hfill \textbf{(mxcase)} \\
    $(\mathrm{rec}(f, g))_*(\inlOp_*(p)) \;\rew\; f_*(p)$.

  \item \texttt{sum\_rec\_inr\_beta} \hfill \textbf{(mxcase)} \\
    $(\mathrm{rec}(f, g))_*(\inrOp_*(q)) \;\rew\; g_*(q)$.
\end{enumerate}

\paragraph{Function type rules.}
\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, resume]
  \item \texttt{fun\_app\_beta} \hfill \textbf{(mxlam)} \\
    $\app(\lamCongr(p), a) \;\rew\; p(a)$.

  \item \texttt{fun\_eta} \hfill \textbf{(mxetaFun)} \\
    $\lamCongr(\lambda x.\, \app(q, x)) \;\rew\; q$.

  \item \texttt{lam\_congr\_symm} \hfill \textbf{(mx3r)} \\
    $\inv{\lamCongr(p)} \;\rew\; \lamCongr(\lambda x.\, \inv{p(x)})$.
\end{enumerate}

\paragraph{Dependent application.}
\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, resume]
  \item \texttt{apd\_refl} \\
    $\apd(f, \refl(a)) \;\rew\; \refl(f(a))$.
\end{enumerate}

\section*{Group III: Transport Rules (5 rules)}

\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, start=26]
  \item \texttt{transport\_refl\_beta} \\
    $\tr_D(\refl(a), x) \;\rew\; x$.

  \item \texttt{transport\_trans\_beta} \\
    $\tr_D(p \comp q, x) \;\rew\; \tr_D(q, \tr_D(p, x))$.

  \item \texttt{transport\_symm\_left\_beta} \\
    $\tr_D(\inv{p}, \tr_D(p, x)) \;\rew\; x$.

  \item \texttt{transport\_symm\_right\_beta} \\
    $\tr_D(p, \tr_D(\inv{p}, y)) \;\rew\; y$.

  \item \texttt{transport\_sigmaMk\_fst\_beta} \\
    $\fst(\tr_\Sigma(\sigmaMk(p, q), x)) \;\rew\; \tr_D(p, \fst(x))$.
\end{enumerate}

\section*{Group IV: Context Rules (16 rules)}

Let $C : \Context(A, B)$ throughout.

\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, start=31]
  \item \texttt{context\_congr} \\
    $p \rew q \implies C[p] \;\rew\; C[q]$ \hfill (context congruence).

  \item \texttt{context\_map\_symm} \hfill \textbf{(smss)} \\
    $\inv{C[p]} \;\rew\; C[\inv{p}]$.

  \item \texttt{context\_tt\_cancel\_left} \hfill \textbf{(ttsv)} \\
    $C[p] \comp (C[\inv{p}] \comp v) \;\rew\; C[p \comp \inv{p}] \comp v$.

  \item \texttt{context\_tt\_cancel\_right} \hfill \textbf{(tstu)} \\
    $(v \comp C[p]) \comp C[\inv{p}] \;\rew\; v \comp C[p \comp \inv{p}]$.

  \item \texttt{context\_subst\_left\_beta} \hfill \textbf{(tsbll)} \\
    $r \comp C[p] \;\rew\; \substL(C, r, p)$.

  \item \texttt{context\_subst\_left\_of\_right} \\
    $\substL(C, \substR(C, p, t), q) \;\rew\; \substR(C, p, t \comp C[q])$.

  \item \texttt{context\_subst\_left\_assoc} \hfill \textbf{(tsblr)} \\
    $\substL(C, r, p) \comp t \;\rew\; r \comp \substR(C, p, t)$.

  \item \texttt{context\_subst\_right\_beta} \hfill \textbf{(tsbrl)} \\
    $C[p] \comp t \;\rew\; \substR(C, p, t)$.

  \item \texttt{context\_subst\_right\_assoc} \hfill \textbf{(tsbrr)} \\
    $\substR(C, p, t) \comp u \;\rew\; \substR(C, p, t \comp u)$.

  \item \texttt{context\_subst\_left\_refl\_right} \hfill \textbf{(slr)} \\
    $\substL(C, \refl, p) \;\rew\; C[p]$.

  \item \texttt{context\_subst\_left\_refl\_left} \hfill \textbf{(slss)} \\
    $\substL(C, \substL(C, r, \refl), p) \;\rew\; \substL(C, r, p)$.

  \item \texttt{context\_subst\_right\_refl\_left} \hfill \textbf{(srr)} \\
    $\substR(C, p, \refl) \;\rew\; C[p]$.

  \item \texttt{context\_subst\_right\_refl\_right} \hfill \textbf{(srrrr)} \\
    $\substR(C, \refl, \substR(C, p, t)) \;\rew\; \substR(C, p, t)$.

  \item \texttt{context\_subst\_left\_idempotent} \hfill \textbf{(slsss)} \\
    $\substL(C, C[\refl], p) \;\rew\; C[p]$.

  \item \texttt{context\_subst\_right\_cancel\_inner} \hfill \textbf{(srsr)} \\
    $\substR(C, p, \substR(C, \refl, t)) \;\rew\; \substR(C, p, t)$.

  \item \texttt{context\_subst\_right\_cancel\_outer} \\
    $\substR(C, p, \substR(C, q, t)) \;\rew\; \substR(C, p \comp q, t)$
    \hfill (under appropriate conditions).
\end{enumerate}

\section*{Group V: Dependent Context Rules (12 rules)}

Let $D : \DepContext(A, B)$ throughout. The rules are direct analogues of
Group~IV with the additional transport data required by the dependency:

\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, start=47]
  \item \texttt{depContext\_congr} \\
    $p \rew q \implies D[p] \;\rew\; D[q]$.

  \item \texttt{depContext\_map\_symm} \\
    $\inv{D[p]} \;\rew\; D[\inv{p}]$.

  \item \texttt{depContext\_subst\_left\_beta} \\
    $r \comp D[p] \;\rew\; \substL(D, r, p)$.

  \item \texttt{depContext\_subst\_left\_assoc} \\
    $\substL(D, r, p) \comp t \;\rew\; r \comp \substR(D, p, t)$.

  \item \texttt{depContext\_subst\_right\_beta} \\
    $D[p] \comp t \;\rew\; \substR(D, p, t)$.

  \item \texttt{depContext\_subst\_right\_assoc} \\
    $\substR(D, p, t) \comp u \;\rew\; \substR(D, p, t \comp u)$.

  \item \texttt{depContext\_subst\_left\_refl\_right} \\
    $\substL(D, \refl, p) \;\rew\; D[p]$.

  \item \texttt{depContext\_subst\_left\_refl\_left} \\
    $\substL(D, \substL(D, r, \refl), p) \;\rew\; \substL(D, r, p)$.

  \item \texttt{depContext\_subst\_right\_refl\_left} \\
    $\substR(D, p, \refl) \;\rew\; D[p]$.

  \item \texttt{depContext\_subst\_right\_refl\_right} \\
    $\substR(D, \refl, \substR(D, p, t)) \;\rew\; \substR(D, p, t)$.

  \item \texttt{depContext\_subst\_left\_idempotent} \\
    $\substL(D, D[\refl], p) \;\rew\; D[p]$.

  \item \texttt{depContext\_subst\_right\_cancel\_inner} \\
    $\substR(D, p, \substR(D, \refl, t)) \;\rew\; \substR(D, p, t)$.
\end{enumerate}

\section*{Group VI: Bi-Context Rules (8 rules)}

These rules govern the congruence properties of binary contexts
$\BiContext(A, B, C)$ and dependent binary contexts $\mathrm{DepBiContext}$:

\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, start=59]
  \item \texttt{depBiContext\_mapLeft\_congr} \\
    $p \rew q \implies \mapLeft(D_2, p, b) \;\rew\; \mapLeft(D_2, q, b)$.

  \item \texttt{depBiContext\_mapRight\_congr} \\
    $p \rew q \implies \mapRight(D_2, a, p) \;\rew\; \mapRight(D_2, a, q)$.

  \item \texttt{depBiContext\_map2\_congr\_left} \\
    $p \rew q \implies \mapTwo(D_2, p, r) \;\rew\; \mapTwo(D_2, q, r)$.

  \item \texttt{depBiContext\_map2\_congr\_right} \\
    $p \rew q \implies \mapTwo(D_2, r, p) \;\rew\; \mapTwo(D_2, r, q)$.

  \item \texttt{biContext\_mapLeft\_congr} \\
    $p \rew q \implies \mapLeft(B_2, p, b) \;\rew\; \mapLeft(B_2, q, b)$.

  \item \texttt{biContext\_mapRight\_congr} \\
    $p \rew q \implies \mapRight(B_2, a, p) \;\rew\; \mapRight(B_2, a, q)$.

  \item \texttt{biContext\_map2\_congr\_left} \\
    $p \rew q \implies \mapTwo(B_2, p, r) \;\rew\; \mapTwo(B_2, q, r)$.

  \item \texttt{biContext\_map2\_congr\_right} \\
    $p \rew q \implies \mapTwo(B_2, r, p) \;\rew\; \mapTwo(B_2, r, q)$.
\end{enumerate}

\section*{Group VII: Map Congruence Rules (4 rules)}

\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, start=67]
  \item \texttt{mapLeft\_congr} \\
    $p \rew q \implies \mapLeft(f, p, b) \;\rew\; \mapLeft(f, q, b)$.

  \item \texttt{mapRight\_congr} \\
    $p \rew q \implies \mapRight(f, a, p) \;\rew\; \mapRight(f, a, q)$.

  \item \texttt{mapLeft\_ofEq} \hfill \textbf{(mxp)} \\
    $\mapLeft(f, \ofEq(h), b) \;\rew\; \ofEq(\congrArgOp(\lambda x.\, f\,x\,b,\, h))$.

  \item \texttt{mapRight\_ofEq} \hfill \textbf{(nxp)} \\
    $\mapRight(f, a, \ofEq(h)) \;\rew\; \ofEq(\congrArgOp(f\,a,\, h))$.
\end{enumerate}

\section*{Group VIII: Structural Closure (4 rules)}

These rules propagate single-step rewrites through all path constructors,
ensuring that the rewrite relation is a congruence:

\begin{enumerate}[label=\textbf{R\arabic*.}, leftmargin=3.5em, start=71]
  \item \texttt{symm\_congr} \\
    $p \rew q \implies \inv{p} \;\rew\; \inv{q}$.

  \item \texttt{trans\_congr\_left} \\
    $p \rew q \implies p \comp r \;\rew\; q \comp r$.

  \item \texttt{trans\_congr\_right} \\
    $q \rew r \implies p \comp q \;\rew\; p \comp r$.

  \item \texttt{context\_congr} \\
    $p \rew q \implies C[p] \;\rew\; C[q]$ \hfill (already listed as R31).
\end{enumerate}

\bigskip

\begin{remark}
  The total count of 76 includes Rule~R31/R74 once (context congruence
  appears in both Group~IV as a context-specific rule and in Group~VIII
  as a structural closure principle; it is a single constructor
  \texttt{context\_congr} in the \texttt{Step} type). The formalization
  contains exactly 74 distinct constructors, with context congruence
  serving double duty. The paper count of 76 follows the convention
  of~\cite{RDQO18}, which lists certain rules in multiple groups for
  expository clarity.
\end{remark}
